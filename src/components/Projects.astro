---

---

  <!-- âœ… Scroll Stack -->
  <div 
    x-data="scrollStack"
    x-init="init()"
    class="relative  overflow-visible"
    style="margin-top: 12vh;"> 
  
    <!-- Scroll track height (í•„ìš”ì‹œ ì¡°ì ˆ: ì¹´ë“œ ì¥ìˆ˜ * ì„¸ê·¸ë¨¼íŠ¸ ê¸¸ì´ ì •ë„) -->
    <div class="relative min-h-[320vh]">

      <!-- ===== FILE 01 ===== -->
      <section class="scroll-card z-30">
        <div class="relative w-[85vw] sm:w-[420px] h-10 sm:h-12 bg-feature1-50 flex items-center pl-4 sm:pl-6 label-clip">
          <span class="font-semibold text-xs sm:text-sm tracking-widest text-secondary-50 font-title">Featured Project 01</span>
        </div>
        <div class="flex-1 bg-feature1-50 border border-feature1-50 shadow-md p-6 sm:px-8 sm:py-12">
          <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-6 items-start">
            <div>
              <h2 class="text-2xl sm:text-3xl font-bold mb-3">Concept & Design</h2>
              <p class=" text-sm sm:text-base">Merging strategy, usability, and creativity into digital solutions.</p>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gray-400 h-32 sm:h-40 rounded"></div>
              <div class="bg-gray-400 h-32 sm:h-40 rounded"></div>
              <div class="bg-gray-400 h-32 sm:h-40 rounded"></div>
              <div class="bg-gray-400 h-32 sm:h-40 rounded"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== FILE 02 ===== -->
      <section class="scroll-card z-40 ">
        <div class="relative w-[85vw] sm:w-[420px] h-10 sm:h-12 bg-feature2-50 flex items-center pl-4 sm:pl-6 label-clip ml-[15vw] sm:ml-[180px]">
          <span class="font-semibold text-xs sm:text-sm tracking-widest text-secondary-50 font-title">Featured Project 02</span>
        </div>
        <div class="flex-1 bg-feature2-50 border border-feature2-50 shadow-md p-6 sm:px-8 sm:py-12">
          <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-6 items-start">
            <div>
              <h2 class="text-2xl sm:text-3xl font-bold mb-3">Storytelling & Content</h2>
              <p class=" text-sm sm:text-base">Turning emotion into meaningful digital experiences.</p>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-feature2-50 h-32 sm:h-40 rounded"></div>
              <div class="bg-feature2-50 h-32 sm:h-40 rounded"></div>
              <div class="bg-feature2-50 h-32 sm:h-40 rounded"></div>
              <div class="bg-feature2-50 h-32 sm:h-40 rounded"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== FILE 03 ===== -->
      <section class="scroll-card z-50">
        <!-- ë¼ë²¨ -->
        <div class="relative w-[85vw] sm:w-[420px] h-10 sm:h-12 bg-feature3-50 flex items-center pl-4 sm:pl-6 label-clip ml-[30vw] sm:ml-[360px]">
          <span class="font-semibold text-xs sm:text-sm tracking-widest text-secondary-50 font-title py-4">Featured Project 03</span>
        </div>

        <!-- ì¹´ë“œ -->
        <div class="flex-1 bg-feature3-50 border border-feature3-50 p-6 shadodw-md sm:px-8 sm:py-12 rounded-lg">
          <div
            class="flex-1 bg-feature3-50 border border-feature3-50 p-6 sm:px-8 sm:py-12 rounded-lg"
            x-data="{
              active: null,
              items: [
                {
                  title: 'Snuggys Eventyr',
                  year: '2024',
                  roles: ['Brand Identity Design','Logo Design','Illustration'],
                  href: '#',
                  img: '/asset/snuggy.svg',
                  slug: 'snuggys-eventyr'
                },
                {
                  title: 'Snuggys Eventyr',
                  year: '2024',
                  roles: ['Brand Identity Design','Logo Design','Illustration'],
                  href: '#',
                  img: '/asset/snuggy.svg',
                  slug: 'snuggys-eventyr-2'
                }
              ]
            }"
          >
            <!-- Headline -->
            <div class="max-w-6xl mx-auto mb-8">
              <h2 class="text-2xl sm:text-3xl font-bold mb-2">Interactive Experiences</h2>
              <p class="text-sm sm:text-base">Creating immersive digital experiences through interaction.</p>
            </div>

            <!-- í—¤ë” + ë¦¬ìŠ¤íŠ¸ (ê°™ì€ ì»¨í…Œì´ë„ˆë¡œ ë¬¶ì–´ ì •ë ¬ ì¼ì¹˜) -->
            <div class="max-w-6xl mx-auto">
              <!-- ğŸ’¡ ëª¨ë°”ì¼ì—ì„œ í—¤ë” ìˆ¨ê¹€ -->
              <div
                class="hidden md:grid grid-cols-12 items-end text-[10px] sm:text-xs uppercase tracking-widest border-t border-b border-dotted border-neutral-700/50 py-2"
              >
                <div class="col-span-12 md:col-span-8">Project title</div>
                <div class="col-span-12 md:col-span-4 md:text-right">Preview</div>
              </div>

              <!-- List -->
              <ul role="list" class="divide-y divide-dotted divide-neutral-700/50">
                <template x-for="(item, idx) in items" :key="item.slug">
                  <li
                    class="group grid grid-cols-12 gap-6 py-6 md:py-8 cursor-pointer select-none"
                    @mouseenter="active = idx"
                    @mouseleave="active = null"
                    @click="active = active === idx ? null : idx"
                  >
                    <!-- Left: title + open (col 8) -->
                    <div class="col-span-12 md:col-span-8">
                      <h3
                        class="font-title text-lg sm:text-xl md:text-2xl font-semibold leading-snug underline-offset-4 decoration-transparent group-hover:decoration-neutral-800"
                      >
                        <a :href="item.href" x-text="item.title"></a>
                      </h3>

                      <!-- open area -->
                      <div
                        class="overflow-hidden transition-[max-height,opacity] duration-500 ease-out"
                        :style="active === idx ? 'max-height:180px;opacity:1' : 'max-height:0;opacity:0'"
                      >
                        <div class="mt-3 grid grid-cols-6 md:grid-cols-8 text-[11px] sm:text-xs">
                          <div class="col-span-2 text-neutral-800" x-text="item.year"></div>
                          <div class="col-span-4 md:col-span-6 space-y-1">
                            <template x-for="r in item.roles" :key="r">
                              <p class="uppercase tracking-widest" x-text="r"></p>
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Right: Preview (col 4) -->
                    <div class="col-span-12 md:col-span-4 md:justify-self-end">
                      <div
                        class="relative w-full aspect-[4/3] md:max-w-[360px] overflow-hidden border border-neutral-800/20 rounded"
                      >
                        <img
                          :src="item.img"
                          :alt="item.title"
                          class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.03]"
                        />
                      </div>
                    </div>
                  </li>
                </template>
              </ul>
              <!-- /List -->
            </div>
          </div>
        </div>
      </section>


    </div>
  </div>

  <!-- âœ… Styles (ëª¨ì–‘ ìœ ì§€) -->
  <style>
    .label-clip {
      clip-path: polygon(0 0, calc(100% - 32px) 0, 100% 100%, 0 100%);
      margin-bottom: 0;
    }
    /* stickyë¡œ â€œíˆì–´ë¡œ ì•„ë˜ ê³ ì •â€ + transformìœ¼ë¡œë§Œ ì˜¬ë¦¼ */
    .scroll-card {
      position: sticky;
      top: 12vh;               /* íˆì–´ë¡œ ì•„ë˜ ê¸°ì¤€ì  */
      height: 80vh;            /* ì¹´ë“œ ë†’ì´ */
      transform-origin: top center;
      will-change: transform;
      transition: transform 0.2s ease-out;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      padding-top: 0.75rem;    /* ë¼ë²¨ê³¼ ë³¸ë¬¸ ì‚¬ì´ ì‚´ì§ ì—¬ìœ  */
    }
  </style>

  <!-- âœ… Alpine: ìŠ¤íƒ íŒ¨ëŸ´ë™ìŠ¤ ë¡œì§ -->
  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.data('scrollStack', () => ({
        cards: [],
        heroH: 0,
        lastY: 0,
        easedY: 0,

        // ì„¤ì •ê°’(ê°„ê²©/ì„¸ê·¸ë¨¼íŠ¸) â€” ë°˜ì‘í˜•ìœ¼ë¡œë„ ì¡°ì ˆë¨
        anchorTop: 0,               // sticky ê¸°ì¤€(top px)
        stackOffset: 140,           // ì¹´ë“œ ê°„ ì´ˆê¸° ì•„ë˜ ì˜¤í”„ì…‹(px) â€” ì´˜ì´˜í•¨(ëª¨ë°”ì¼ì—ì„œ ìë™ ì¶•ì†Œ)
        segment: 0,                 // ì¹´ë“œ ë‹¹ ìŠ¤í¬ë¡¤ ì„¸ê·¸ë¨¼íŠ¸(px)
        ease: 0.12,                 // ìŠ¤í¬ë¡¤ ìŠ¤ë¬´ë”©(0~1)

        init() {
          // ë…¸ë“œ/ì¹˜ìˆ˜
          this.cards = [...document.querySelectorAll('.scroll-card')];
          const heroImg = document.querySelector('section img[alt="Project Hero"]') as HTMLElement | null;
          this.heroH = heroImg?.offsetHeight ?? window.innerHeight;


          // sticky top(px) êµ¬í•˜ê¸° (CSS 12vhì™€ ë™ê¸°í™”)
          this.anchorTop = Math.round(window.innerHeight * 0.12);

          // ë°˜ì‘í˜•: ëª¨ë°”ì¼ì—ì„œ ê°„ê²© ì¶•ì†Œ
          this.stackOffset = window.innerWidth < 640 ? 90 : 140;

          // ì„¸ê·¸ë¨¼íŠ¸ ê¸¸ì´(ì¹´ë“œ í•˜ë‚˜ê°€ â€œì˜¬ë¼ì˜¤ëŠ”â€ êµ¬ê°„ ê¸¸ì´)
          this.segment = Math.round(window.innerHeight * 0.6);

          // ìŠ¤í¬ë¡¤/ë¦¬ì‚¬ì´ì¦ˆ
          window.addEventListener('scroll', () => (this.lastY = window.scrollY));
          window.addEventListener('resize', () => {
            this.heroH = heroImg ? heroImg.offsetHeight : window.innerHeight;
            this.anchorTop = Math.round(window.innerHeight * 0.12);
            this.stackOffset = window.innerWidth < 640 ? 90 : 140;
            this.segment = Math.round(window.innerHeight * 0.6);
          });

          // RAF ë£¨í”„ ì‹œì‘
          this.raf();
        },

        // 0~1 clamp
        clamp01(v) { return Math.max(0, Math.min(1, v)); },

        raf() {
          // Lenisì²˜ëŸ¼ ë¶€ë“œëŸ½ê²Œ
          this.easedY += (this.lastY - this.easedY) * this.ease;

          // íˆì–´ë¡œ ì•„ë˜ë¶€í„° ìŠ¤íƒ ì‹œì‘
          const s = Math.max(0, this.easedY - (this.heroH - this.anchorTop));

          // ì¹´ë“œë³„ ì²˜ë¦¬
          this.cards.forEach((card, i) => {
            if (i === 0) {
              // 1ë²ˆì€ í•­ìƒ ê¸°ì¤€ ìœ„ì¹˜(ì´ˆê¸° ì˜¤í”„ì…‹ 0)
              card.style.transform = 'translate3d(0, 0, 0)';
              return;
            }

            // ië²ˆì§¸ ì¹´ë“œì˜ â€œì‹œì‘ ì§€ì â€ â€” ië²ˆì§¸ ì„¸ê·¸ë¨¼íŠ¸ë¶€í„° ì›€ì§ì´ê¸° ì‹œì‘
            const start = (i - 1) * this.segment;
            const end   = start + this.segment;

            // 0~1 ì§„í–‰ë¥ : startì—ì„œ endê¹Œì§€
            const t = this.clamp01((s - start) / (end - start));

            // ì´ˆê¸° ì•„ë˜ ì˜¤í”„ì…‹ = i * stackOffset (ì˜ˆ: 2ë²ˆ=140, 3ë²ˆ=280)
            const initial = i * this.stackOffset;

            // ìŠ¤í¬ë¡¤ì´ ì§„í–‰ë ìˆ˜ë¡ ì˜¤í”„ì…‹ì„ 0ìœ¼ë¡œ ì¤„ì—¬ ìœ„ë¡œ â€œì˜¬ë¼ì˜¤ê²Œâ€
            const translate = initial * (1 - t);

            // íˆì–´ë¡œ/í—¤ë” ìœ„ë¡œëŠ” ì ˆëŒ€ ëª» ì˜¬ë¼ê°€ë„ë¡ 0 ì´í•˜ë¡œ clamp ê¸ˆì§€
            // (translateëŠ” í•­ìƒ 0~initial ë²”ìœ„ë¼ ìœ„ë¡œ ë„˜ì¹˜ì§€ ì•ŠìŒ)
            card.style.transform = `translate3d(0, ${translate}px, 0)`;
          });

          requestAnimationFrame(() => this.raf());
        }
      }));
    });
  </script>

</MainLayout>
