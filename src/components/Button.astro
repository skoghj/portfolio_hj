---
const { 
  text = "Button", 
  variant = "primary",            // "primary" | "download"
  bgColor = "#EA5E02",            // primary용 hover 색상
  borderColor = "#EA5E02",        // primary용 테두리 색
  textColor = "black",            // 기본 텍스트 색
  hoverTextColor = "white",       // hover 시 텍스트 색
  link = "#", 
  className = ""
} = Astro.props;
---

<style>
/* 물결 자체가 좌우로 움직이는 파도 */
@keyframes waveMotion {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* 물결 전체가 위로 차오르는 상승 애니메이션 */
@keyframes waveRise {
  0% { transform: translateY(100%); }
  100% { transform: translateY(0%); }
}

/* 외곽 회전 */
@keyframes rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 텍스트 등장 */
@keyframes showText {
  0% { opacity: 0; transform: translateX(10px); }
  100% { opacity: 1; transform: translateX(0); }
}
</style>

<!-- ========================================================= -->
<!-- 🟠 PRIMARY BUTTON -->
<!-- ========================================================= -->
{variant === "primary" && (
  <a
    href={link}
    target="_blank"
    class={`relative inline-flex w-fit items-center justify-center overflow-hidden rounded-full border-2 font-semibold text-[15px] tracking-wide px-5 py-2 transition-all duration-500 ease-[cubic-bezier(0.3,1,0.8,1)] group cursor-pointer ${className}`}
    style={`color:${textColor}; border-color:${borderColor};`}
  >
    <span class="relative z-10 transition-colors duration-500 ease-in-out group-hover:text-[${hoverTextColor}]">
      {text}
    </span>
    <span
      class="absolute left-0 top-0 h-full w-0 transition-[width] duration-[500ms] ease-[cubic-bezier(0.3,1,0.8,1)] group-hover:w-full"
      style={`background-color:${bgColor}; z-index:0;`}
    ></span>
  </a>
)}

<!-- ========================================================= -->
<!-- 🟣 DOWNLOAD BUTTON -->
<!-- ========================================================= -->
{variant === "download" && (
  <div class={`flex justify-center items-center ${className}`}>
    <label class="relative flex items-center justify-start w-[160px] border-2 border-[#5B5BF0] rounded-full cursor-pointer p-[5px] overflow-hidden bg-transparent transition-all duration-500 ease-in-out">
      <input type="checkbox" class="hidden peer" />

      <!-- 🔵 Circle -->
      <div class="relative flex items-center justify-center h-[45px] w-[45px] rounded-full overflow-hidden bg-[#5B5BF0]">
        <!-- Wave fill layer -->
        <svg class="absolute inset-0 w-full h-full" viewBox="0 0 120 120" preserveAspectRatio="none">
          <defs>
            <mask id="wave-mask">
              <rect width="120" height="120" fill="white" />
              <path
                class="wave peer-checked:animate-[waveFill_3s_ease-in-out_forwards]"
                fill="black"
                d="M0,60 Q30,40 60,60 T120,60 V120 H0 Z"
              />
            </mask>
          </defs>
          <rect width="120" height="120" fill="#3333a8" mask="url(#wave-mask)" />
        </svg>

        <!-- ↓ icon -->
        <svg
          class="z-10 text-white w-[28px] absolute transition-opacity duration-500 ease-in-out peer-checked:opacity-0"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="1.5"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 19V5m0 14-4-4m4 4 4-4" />
        </svg>

        <!-- ⬛ stop square (나중에 표시) -->
        <div class="z-10 w-[15px] h-[15px] bg-white rounded-[2px] opacity-0 peer-checked:opacity-100 transition-opacity duration-700"></div>

        <!-- 회전 외곽 링 -->
        <span
          class="absolute inset-0 rounded-full border-2 border-[#5B5BF0] opacity-0 peer-checked:opacity-100 peer-checked:animate-[rotate_3s_linear]"
        ></span>
      </div>

      <!-- Download → Open 텍스트 -->
      <p
        class="absolute right-[18px] bottom-[14px] text-[17px] text-white transition-opacity duration-500 ease-in-out peer-checked:opacity-0"
      >
        Download
      </p>
      <p
        class="absolute right-[18px] bottom-[14px] text-[17px] text-white opacity-0 peer-checked:animate-[showText_0.6s_ease-in_3s_forwards]"
      >
        Open
      </p>
    </label>
  </div>
)}

